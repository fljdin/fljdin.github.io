<!doctype html><html lang=fr><head><meta name=generator content="Hugo 0.139.4"><title>Carnet de découvertes</title>
<link rel=stylesheet href=https://fljd.in/css/main.min.css><link rel=alternate type=application/rss+xml title="Carnet de découvertes" href=https://fljd.in/index.xml><link rel=apple-touch-icon sizes=180x180 href=/ico/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/ico/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/ico/favicon-16x16.png><link rel=manifest href=/ico/site.webmanifest><meta name=fediverse:creator content="@fljdin@mastodon.tedomum.net"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8></head><body><div class="container content"><header class=homepage><h3 class=homepage-title><a href=/ title="Florent Jardin">Florent Jardin</a>
<small><a href=/index.xml><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#rss"/></svg></a>
<a href=https://mastodon.tedomum.net/@fljdin rel=me><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#mastodon"/></svg></a>
<a href=https://github.com/fljdin><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#github"/></svg></a>
<a href=https://www.linkedin.com/in/florent-jardin><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#linkedin"/></svg></a>
&nbsp;&nbsp;<a href=/conferences>Conférences</a>&nbsp;&nbsp;<a href=/archives>Archives</a>&nbsp;&nbsp;<a href=/a-propos>À propos</a></small></h3></header><main><div class=posts><article class=post><h1 class=post-title><a href=https://fljd.in/2024/11/25/substituer-une-variable-dans-un-script-sql/>Substituer une variable dans un script SQL</a></h1><time datetime=2024-11-25 class=post-date>25 nov 2024</time><p>Il est fréquent de vouloir automatiser une tâche répétitive en la scriptant
rapidement, puis à force d&rsquo;itérations, de l&rsquo;enrichir, voire de l&rsquo;intégrer dans
la base de code d&rsquo;un projet. À ce jeu, les outils comme SQL*Plus et psql peuvent
être de puissants alliés et des interpréteurs aussi pertinents que Bash ou
Python.</p><p>Dans le cadre des projets de migration que je mène régulièrement, il m&rsquo;arrive de
tomber sur ces scripts, en grand nombre. Certains ont la particularité de
proposer des paramètres d&rsquo;entrée, traités par SQL*Plus avec le mécanisme très
confortable de substitution de variables. Dans cet article, je partage quelques
astuces pour convertir certains aspects de ces scripts grâce aux fonctionnalités
équivalentes que l&rsquo;on retrouve sur l&rsquo;outil psql de PostgreSQL.</p><small>» <a href=https://fljd.in/2024/11/25/substituer-une-variable-dans-un-script-sql/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2024/10/14/poissons-et-coquillages/>Poissons et coquillages</a></h1><time datetime=2024-10-14 class=post-date>14 oct 2024</time><p>En tant que pur produit académique des années 2010, mon langage de script de prédilection a
toujours été le Bash (<em>Bourne Again Shell</em>). Non sans ignorer qu&rsquo;il ait pu en exister d&rsquo;autres, je
ne me suis jamais vraiment tourné vers d&rsquo;autres shells pour automatiser les tâches du quotidien
dans mon métier de DBA.</p><p>Et pour cause, j&rsquo;ai administré des centaines de serveurs de distributions très variées et il
n&rsquo;était pas bien vu d&rsquo;installer des dépendances systèmes lourdes pour enrichir des scripts Python
ou Perl. Nous apprenions donc à écrire des scripts portables et universels, compatibles partout
où nous déposions nos valises.</p><p>Me suis-je enfermé dans un dogme conservateur, en m&rsquo;interdisant <em>de facto</em> à me tourner vers des
shells modernes et bien plus aisés à appréhender ?</p><small>» <a href=https://fljd.in/2024/10/14/poissons-et-coquillages/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2024/09/19/les-types-hierarchiques/>Les types hiérarchiques</a></h1><time datetime=2024-09-19 class=post-date>19 sept 2024</time><p>Bien que la norme SQL définisse un ensemble de règles pour que les systèmes de bases
de données puissent être interchangeables, il existe de petites singularités dans la
nature. À ce titre, le type de données <code>hierarchyid</code> fourni par SQL Server est un
exemple flagrant. Si vous êtes amené à basculer vers PostgreSQL, deux solutions s&rsquo;offrent
à vous.</p><p>Une première et plus simple consiste à lier chaque nœud à son parent à l&rsquo;aide d&rsquo;une nouvelle
colonne <code>parentid</code> et d&rsquo;y appliquer une contrainte de clé étrangère. Une autre approche,
plus complète, consiste à utiliser l&rsquo;extension <code>ltree</code>. Cet article traite de ce dernier
cas.</p><small>» <a href=https://fljd.in/2024/09/19/les-types-hierarchiques/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2024/07/30/faire-vivre-une-communaute/>Faire vivre une communauté</a></h1><time datetime=2024-07-30 class=post-date>30 juil 2024</time><p>Le <a href=https://pgday.fr/ target=_blank rel=noopener>PG Day France</a> s&rsquo;est tenu les 11 et 12 juin derniers à Lille, ma ville natale.
Il s&rsquo;agit de l&rsquo;événement de la communauté française de PostgreSQL qui pose ses valises dans une
ville différente chaque année. L&rsquo;occasion était trop belle pour moi et j&rsquo;y ai rencontré de nombreuses
personnes venant de toute la France et de ses alentours, pour discuter de PostgreSQL au cours
de deux jours d&rsquo;ateliers et de conférences.</p><p>Pour cette édition, j&rsquo;ai eu le plaisir de prendre la parole et de faire un retour d&rsquo;expérience
sur l&rsquo;animation du groupe Meetup local dont j&rsquo;ai repris les rennes il y a maintenant quatre ans.
Dans cet article, je souhaite retranscrire les principaux points abordés lors de cette présentation,
en attendant que la vidéo de la conférence soit mise en ligne.</p><small>» <a href=https://fljd.in/2024/07/30/faire-vivre-une-communaute/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2024/05/28/un-assistant-pour-copier-les-donnees-distantes/>Un assistant pour copier les données distantes</a></h1><time datetime=2024-05-28 class=post-date>28 mai 2024</time><p>Lors de la dernière <a href=https://blog.dalibo.com/2023/12/08/pgsession16_programme.html target=_blank rel=noopener>PGSession 16</a>, j&rsquo;ai rédigé et animé un <a href=https://dali.bo/wsfdw_html target=_blank rel=noopener>atelier</a> de
trois heures au sujet de la migration vers PostgreSQL à l&rsquo;aide des Foreign Data
Wrappers, ou FDW. Ce fut notamment l&rsquo;occasion de présenter au grand public,
l&rsquo;extension <a href=https://github.com/cybertec-postgresql/db_migrator target=_blank rel=noopener><code>db_migrator</code></a> pour laquelle j&rsquo;ai dédié un <a href=/2023/07/28/en-route-vers-la-liberte-avec-db_migrator/>article</a> sur ce
blog.</p><p>Au cours de cet atelier, nous pouvons constater que la copie des données avec
l&rsquo;extension <code>db_migrator</code> n&rsquo;est pas parfaitement prise en charge. En effet, bien
qu&rsquo;il existe une fonction de bas niveau pour répartir sur plusieurs processus le
transfert table à table, de nombreuses situations devront exiger de rédiger un
grand nombre de requêtes SQL pour se tirer d&rsquo;affaire. Au cours des mois qui
suivirent, je me suis attelé à la conception d&rsquo;un <a href=https://github.com/fljdin/fdw-assistant target=_blank rel=noopener>assistant</a> écrit en
PL/pgSQL dont le but est de simplifier la génération de ces requêtes.</p><small>» <a href=https://fljd.in/2024/05/28/un-assistant-pour-copier-les-donnees-distantes/>Lire la suite</a></small></article></div><div class=pagination><a class="pagination-item older" href=/page/2/>Page précédente</a>
<span class="pagination-item newer">Page suivante</span></div></main><footer class=footer><small>&copy; 2019-<time datetime=2025-05-18>2025</time>
— <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.fr>Creative Commons License BY-NC-ND 4.0</a></small></footer></div></body></html>