<!doctype html><html lang=fr><head><meta name=generator content="Hugo 0.147.8"><title>Carnet de découvertes</title><link rel=stylesheet href=https://fljd.in/css/main.min.css><link rel=alternate type=application/rss+xml title="Carnet de découvertes" href=https://fljd.in/index.xml><link rel=apple-touch-icon sizes=180x180 href=/ico/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/ico/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/ico/favicon-16x16.png><link rel=manifest href=/ico/site.webmanifest><meta name=fediverse:creator content="@fljdin@mastodon.tedomum.net"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8></head><body><div class="container content"><header class=homepage><h3 class=homepage-title><a href=/ title="Florent Jardin">Florent Jardin</a>
<small><a href=/index.xml><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#rss"/></svg></a>
<a href=https://mastodon.tedomum.net/@fljdin rel=me><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#mastodon"/></svg></a>
<a href=https://github.com/fljdin><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#github"/></svg></a>
<a href=https://www.linkedin.com/in/florent-jardin><svg class="svg-icon"><use xlink:href="https://fljd.in/img/social-icons.svg#linkedin"/></svg></a>
&nbsp;&nbsp;<a href=/conferences>Conférences</a>&nbsp;&nbsp;<a href=/archives>Archives</a>&nbsp;&nbsp;<a href=/a-propos>À propos</a></small></h3></header><main><div class=posts><article class=post><h1 class=post-title><a href=https://fljd.in/2023/02/10/le-fenetrage-a-la-rescousse/>Le fenêtrage à la rescousse</a></h1><time datetime=2023-02-10 class=post-date>10 févr 2023</time><p>PostgreSQL propose un certain nombre de fonctions qui permettent de calculer des
valeurs agrégées ou relatives sur un ensemble de lignes qui se situent dans une
« fenêtre » autour de la ligne courante. En utilisant de telles fonctions,
n&rsquo;importe qui peut créer des requêtes plus avancées et plus efficaces pour
l&rsquo;analyse de leur base de données.</p><p>Depuis plusieurs semaines, je contribue à un projet de conversion de modèles de
données vers PostgreSQL, appelé <a href=https://github.com/cybertec-postgresql/db_migrator target=_blank rel=noopener>db_migrator</a>. À cette occasion, j&rsquo;ai
(re)découvert la puissance de ces <a href=https://www.postgresql.org/docs/current/functions-window.html target=_blank rel=noopener>fonctions de fenêtrage</a> avec le langage
SQL. Dans cet article, je reviens sur un <a href=https://github.com/cybertec-postgresql/db_migrator/pull/11 target=_blank rel=noopener>cas concret</a> de transformation des
bornes supérieures d&rsquo;une table partitionnée en tableau de valeur.</p><small>» <a href=https://fljd.in/2023/02/10/le-fenetrage-a-la-rescousse/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2022/09/29/construire-postgresql-avec-meson/>Construire PostgreSQL avec Meson</a></h1><time datetime=2022-09-29 class=post-date>29 sept 2022</time><p>Alors que la version 15 de PostgreSQL se prépare à sortir dans les <a href=https://www.postgresql.org/about/news/postgresql-15-rc-1-released-2516/ target=_blank rel=noopener>prochains
jours</a>, le groupe de développement du projet communautaire ont intégré <a href="https://git.postgresql.org/gitweb/?p=postgresql.git;a=commit;h=e6927270cd18d535b77cbe79c55c6584351524be" target=_blank rel=noopener>leurs
récents travaux</a> pour accélérer les tâches d&rsquo;automatisation et de compilation
à l&rsquo;aide du système de construction <a href=https://mesonbuild.com/ target=_blank rel=noopener>Meson</a>.</p><p>Ce chantier n&rsquo;est pas anodin et redessine les contours de l&rsquo;écosystème du moteur
de bases de données open-source le plus avancé au monde. Depuis sa forme libre
publiée en 1998, PostgreSQL repose sur des solutions robustes et éprouvées, mais
de plus en plus complexes à maintenir pour les nouvelles générations de
contributeur·rices. En proposant de se tourner vers un logiciel comme Meson, ces
amoureux et amoureuses du libre se tournent résolument vers l&rsquo;avenir.</p><small>» <a href=https://fljd.in/2022/09/29/construire-postgresql-avec-meson/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2022/06/29/dessine-moi-un-arbre-abstrait/>Dessine-moi un arbre (abstrait)</a></h1><time datetime=2022-06-29 class=post-date>29 juin 2022</time><blockquote><p>L&rsquo;étape d&rsquo;analyse crée un arbre d&rsquo;analyse qui n&rsquo;utilise que les règles fixes
de la structure syntaxique de SQL. Il ne fait aucune recherche dans les
catalogues système. Il n&rsquo;y a donc aucune possibilité de comprendre la sémantique
détaillée des opérations demandées.</p><p>(Documentation : <a href=https://docs.postgresql.fr/14/parser-stage.html#id-1.10.3.6.4 target=_blank rel=noopener>Processus de transformation</a>)</p></blockquote><p>Que se passe-t-il entre l&rsquo;instant où une requête SQL est soumise par l&rsquo;utilisateur
et l&rsquo;envoi du résultat sous forme de lignes par le serveur PostgreSQL ? Cette
question passionnante (pour une poignée de personnes, ne nous le cachons pas) a
été étudiée par Stefan Simkovics durant <a href=https://archive.org/details/Enhancement_of_the_ANSI_SQL_Implementation_of_PostgreSQL/ target=_blank rel=noopener>sa thèse</a> pour l&rsquo;université de
technologie de Vienne en 1998.</p><p>Ces travaux ont notamment permis d&rsquo;enrichir la <a href=https://docs.postgresql.fr/14/overview.html target=_blank rel=noopener>documentation officielle</a> avec
le chapitre « Présentation des mécanismes internes de PostgreSQL », qui reprend
assez largement les observations de Simkovics de manière simplifiée pour en
faciliter l&rsquo;accès au plus grand nombre.</p><p>Dans cet article, je souhaite présenter de récentes découvertes sur l&rsquo;une de ces
phases internes, l&rsquo;étape d&rsquo;analyse, qui permet de manipuler une requête SQL sous
une forme d&rsquo;arbre et qui respecte un pattern de développement avancé nommé <a href=https://fr.wikipedia.org/wiki/Arbre_de_la_syntaxe_abstraite target=_blank rel=noopener>AST</a>
(<em>abstract syntax tree</em>).</p><small>» <a href=https://fljd.in/2022/06/29/dessine-moi-un-arbre-abstrait/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2022/04/21/halte-aux-regressions/>Halte aux régressions</a></h1><time datetime=2022-04-21 class=post-date>21 avr 2022</time><p>Pour garantir la qualité du code d&rsquo;un logiciel, rien de mieux que la validation
par les tests. Ces derniers peuvent être de différentes natures (fonctionnels,
intégration, unitaires, performance, etc.) et permettent de respecter une série
d&rsquo;exigences que s&rsquo;imposent les développeurs pour maintenir et faire évoluer ledit
logiciel dans la bonne direction.</p><p>Dans cet article, je souhaite explorer le système de tests tel qu&rsquo;il est (et
a été) implémenté dans PostgreSQL et comment le réemployer dans la rédaction d&rsquo;une
extension communautaire. Si vous ne connaissiez pas l&rsquo;outil <code>pg_regress</code>, il
n&rsquo;aura plus de secret pour vous !</p><small>» <a href=https://fljd.in/2022/04/21/halte-aux-regressions/>Lire la suite</a></small></article><article class=post><h1 class=post-title><a href=https://fljd.in/2022/03/11/conversions-implicites/>Conversions implicites</a></h1><time datetime=2022-03-11 class=post-date>11 mars 2022</time><p>À l&rsquo;image d&rsquo;un langage de programmation classique, le SQL manipule des données
typées, comme les chaînes de caractères, les dates ou des entiers numériques.
Les opérations de transformations ou de comparaison diffèrent en fonction du
type de données ; il ne sera pas possible de comparer le caractère <code>A</code> avec le
chiffre <code>4</code> mais l&rsquo;opérateur <code>||</code> permettra la concaténation des deux éléments.</p><p>Dans cet article, je souhaite partager quelques anecdotes et problématiques de
terrain concernant cette particularité logicielle et comprendre les effets de
bord pour mieux les appréhender. Je prendrais un exemple assez spécifique du type
<code>oid</code> et d&rsquo;un risque de transtypage pouvant perturber le stockage de <em>Large
Objects</em> dans une table, voire leur destruction non désirée.</p><small>» <a href=https://fljd.in/2022/03/11/conversions-implicites/>Lire la suite</a></small></article></div><div class=pagination><a class="pagination-item older" href=/page/4/>Page précédente</a>
<a class="pagination-item newer" href=/page/2/>Page suivante</a></div></main><footer class=footer><small>&copy; 2019-<time datetime=2025-10-08>2025</time>
— <a href=https://creativecommons.org/licenses/by-nc-nd/4.0/deed.fr>Creative Commons License BY-NC-ND 4.0</a></small></footer></div></body></html>